# Backend Load Balancing
upstream backend_cluster {
    # 로드밸런싱 알고리즘
    least_conn;  # 연결 수가 적은 서버로

    # Backend Instance #1
    server backend-1:8080 max_fails=3 fail_timeout=30s weight=1;

    # Backend Instance #2
    server backend-2:8080 max_fails=3 fail_timeout=30s weight=1;

    # Connection keep-alive
    keepalive 32;
    keepalive_requests 100;
    keepalive_timeout 60s;
}
